machine:
  node:
    version: 6.5.0

test:
  override:
    - set -o pipefail && npm -s test > ${CIRCLE_TEST_REPORTS}/testresults.xml
    - npm run lint
    - npm run createcoverage
    - set -o pipefail && npm -s run reportcoverage > ${CIRCLE_TEST_REPORTS}/coverage.lcov
deployment:
  releases:
    branch: master
    commands:
      - scripts/ci-deploy.sh